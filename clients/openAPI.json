{
  "openapi": "3.0.3",
  "info": {
    "title": "notifier",
    "description": "",
    "contact": {
      "name": "",
      "email": ""
    },
    "license": {
      "name": ""
    },
    "version": "0.2.2"
  },
  "paths": {
    "/add_channel": {
      "post": {
        "tags": [
          "crate"
        ],
        "summary": "Add channel",
        "description": "Add channel\n\nRemove notification channel for user\n",
        "operationId": "handle_add_channel",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddChannelBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Channel added successfully"
          }
        },
        "deprecated": false
      }
    },
    "/get_telegram_chat_id": {
      "post": {
        "tags": [
          "crate"
        ],
        "summary": "Get the chat ID of a telegram username",
        "description": "Get the chat ID of a telegram username\n\nFirst call this endpoint, then ask the user to send a message to the bot, then the chat id will be returned\n",
        "operationId": "handle_get_telegram_chat_id",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetTelegramChatIdBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Channel added successfully"
          }
        },
        "deprecated": false
      }
    },
    "/notify": {
      "post": {
        "tags": [
          "crate"
        ],
        "summary": "Send notification",
        "description": "Send notification\n\nsend notification to user with given id on all channels registered for that user\n",
        "operationId": "handle_notify",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendNotificationBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Notification sent successfully"
          }
        },
        "deprecated": false
      }
    },
    "/remove_channel": {
      "post": {
        "tags": [
          "crate"
        ],
        "summary": "Remove channel",
        "description": "Remove channel\n\nRemove notification channel for user\n",
        "operationId": "handle_remove_channel",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RemoveChannelBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Channel removed successfully"
          }
        },
        "deprecated": false
      }
    }
  },
  "components": {
    "schemas": {
      "RemoveChannelBody": {
        "type": "object",
        "required": [
          "user_id",
          "service_id"
        ],
        "properties": {
          "user_id": {
            "type": "string"
          },
          "service_id": {
            "type": "string"
          }
        }
      },
      "GetTelegramChatIdBody": {
        "type": "object",
        "required": [
          "user_id",
          "telegram_username"
        ],
        "properties": {
          "telegram_username": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          }
        }
      },
      "AddChannelBody": {
        "type": "object",
        "required": [
          "user_id",
          "service_id",
          "service_username"
        ],
        "properties": {
          "user_id": {
            "type": "string"
          },
          "service_username": {
            "type": "string"
          },
          "service_id": {
            "type": "string"
          }
        }
      },
      "SendNotificationBody": {
        "type": "object",
        "required": [
          "user_id",
          "subject",
          "message"
        ],
        "properties": {
          "subject": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      }
    }
  }
}